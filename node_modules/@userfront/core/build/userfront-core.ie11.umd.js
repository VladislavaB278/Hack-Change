!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e||self).core=t()}(this,function(){function e(e,t){this.name="AggregateError",this.errors=e,this.message=t||""}e.prototype=Error.prototype;var t=setTimeout;function n(e){return Boolean(e&&void 0!==e.length)}function r(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,o._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void s(t.promise,e)}i(t.promise,r)}else(1===e._state?i:s)(t.promise,e._value)})):e._deferreds.push(t)}function i(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof o)return e._state=3,e._value=t,void c(e);if("function"==typeof n)return void d((r=n,a=t,function(){r.apply(a,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(t){s(e,t)}var r,a}function s(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function u(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function d(e,t){var n=!1;try{e(function(e){n||(n=!0,i(t,e))},function(e){n||(n=!0,s(t,e))})}catch(e){if(n)return;n=!0,s(t,e)}}o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(r);return a(this,new u(e,t,n)),n},o.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})},o.all=function(e){return new o(function(t,r){if(!n(e))return r(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(e);if(0===o.length)return t([]);var a=o.length;function i(e,n){try{if(n&&("object"==typeof n||"function"==typeof n)){var s=n.then;if("function"==typeof s)return void s.call(n,function(t){i(e,t)},r)}o[e]=n,0==--a&&t(o)}catch(e){r(e)}}for(var s=0;s<o.length;s++)i(s,o[s])})},o.any=function(t){var n=this;return new n(function(r,o){if(!t||void 0===t.length)return o(new TypeError("Promise.any accepts an array"));var a=Array.prototype.slice.call(t);if(0===a.length)return o();for(var i=[],s=0;s<a.length;s++)try{n.resolve(a[s]).then(r).catch(function(t){i.push(t),i.length===a.length&&o(new e(i,"All promises were rejected"))})}catch(e){o(e)}})},o.allSettled=function(e){return new this(function(t,n){if(!e||void 0===e.length)return n(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function a(e,n){if(n&&("object"==typeof n||"function"==typeof n)){var i=n.then;if("function"==typeof i)return void i.call(n,function(t){a(e,t)},function(n){r[e]={status:"rejected",reason:n},0==--o&&t(r)})}r[e]={status:"fulfilled",value:n},0==--o&&t(r)}for(var i=0;i<r.length;i++)a(i,r[i])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(t){t(e)})},o.reject=function(e){return new o(function(t,n){n(e)})},o.race=function(e){return new o(function(t,r){if(!n(e))return r(new TypeError("Promise.race accepts an array"));for(var a=0,i=e.length;a<i;a++)o.resolve(e[a]).then(t,r)})},o._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){t(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var l=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}},f=Object.prototype.toString;function h(e){return"[object Array]"===f.call(e)}function p(e){return void 0===e}function m(e){return null!==e&&"object"==typeof e}function v(e){if("[object Object]"!==f.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function w(e){return"[object Function]"===f.call(e)}function g(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),h(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var k={isArray:h,isArrayBuffer:function(e){return"[object ArrayBuffer]"===f.call(e)},isBuffer:function(e){return null!==e&&!p(e)&&null!==e.constructor&&!p(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:m,isPlainObject:v,isUndefined:p,isDate:function(e){return"[object Date]"===f.call(e)},isFile:function(e){return"[object File]"===f.call(e)},isBlob:function(e){return"[object Blob]"===f.call(e)},isFunction:w,isStream:function(e){return m(e)&&w(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:g,merge:function e(){var t={};function n(n,r){t[r]=v(t[r])&&v(n)?e(t[r],n):v(n)?e({},n):h(n)?n.slice():n}for(var r=0,o=arguments.length;r<o;r++)g(arguments[r],n);return t},extend:function(e,t,n){return g(t,function(t,r){e[r]=n&&"function"==typeof t?l(t,n):t}),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}};function y(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var R=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(k.isURLSearchParams(t))r=t.toString();else{var o=[];k.forEach(t,function(e,t){null!=e&&(k.isArray(e)?t+="[]":e=[e],k.forEach(e,function(e){k.isDate(e)?e=e.toISOString():k.isObject(e)&&(e=JSON.stringify(e)),o.push(y(t)+"="+y(e))}))}),r=o.join("&")}if(r){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e};function b(){this.handlers=[]}b.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},b.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},b.prototype.forEach=function(e){k.forEach(this.handlers,function(t){null!==t&&e(t)})};var T=b,j=function(e,t){k.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})},E=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e},U=function(e,t,n,r,o){var a=new Error(e);return E(a,t,n,r,o)},P=k.isStandardBrowserEnv()?{write:function(e,t,n,r,o,a){var i=[];i.push(e+"="+encodeURIComponent(t)),k.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),k.isString(r)&&i.push("path="+r),k.isString(o)&&i.push("domain="+o),!0===a&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},x=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],I=k.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=k.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},C={"Content-Type":"application/x-www-form-urlencoded"};function S(e,t){!k.isUndefined(e)&&k.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var q,O={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(q=function(e){return new o(function(t,n){var r=e.data,o=e.headers,a=e.responseType;k.isFormData(r)&&delete o["Content-Type"];var i=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",c=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(s+":"+c)}var u,d,l=(d=e.url,(u=e.baseURL)&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(d)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(u,d):d);function f(){if(i){var r,o,s,c,u,d="getAllResponseHeaders"in i?(r=i.getAllResponseHeaders(),u={},r?(k.forEach(r.split("\n"),function(e){if(c=e.indexOf(":"),o=k.trim(e.substr(0,c)).toLowerCase(),s=k.trim(e.substr(c+1)),o){if(u[o]&&x.indexOf(o)>=0)return;u[o]="set-cookie"===o?(u[o]?u[o]:[]).concat([s]):u[o]?u[o]+", "+s:s}}),u):u):null;!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(U("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}(t,n,{data:a&&"text"!==a&&"json"!==a?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:d,config:e,request:i}),i=null}}if(i.open(e.method.toUpperCase(),R(l,e.params,e.paramsSerializer),!0),i.timeout=e.timeout,"onloadend"in i?i.onloadend=f:i.onreadystatechange=function(){i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))&&setTimeout(f)},i.onabort=function(){i&&(n(U("Request aborted",e,"ECONNABORTED",i)),i=null)},i.onerror=function(){n(U("Network Error",e,null,i)),i=null},i.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(U(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",i)),i=null},k.isStandardBrowserEnv()){var h=(e.withCredentials||I(l))&&e.xsrfCookieName?P.read(e.xsrfCookieName):void 0;h&&(o[e.xsrfHeaderName]=h)}"setRequestHeader"in i&&k.forEach(o,function(e,t){void 0===r&&"content-type"===t.toLowerCase()?delete o[t]:i.setRequestHeader(t,e)}),k.isUndefined(e.withCredentials)||(i.withCredentials=!!e.withCredentials),a&&"json"!==a&&(i.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&i.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){i&&(i.abort(),n(e),i=null)}),r||(r=null),i.send(r)})}),q),transformRequest:[function(e,t){return j(t,"Accept"),j(t,"Content-Type"),k.isFormData(e)||k.isArrayBuffer(e)||k.isBuffer(e)||k.isStream(e)||k.isFile(e)||k.isBlob(e)?e:k.isArrayBufferView(e)?e.buffer:k.isURLSearchParams(e)?(S(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):k.isObject(e)||t&&"application/json"===t["Content-Type"]?(S(t,"application/json"),function(e,t,n){if(k.isString(e))try{return(0,JSON.parse)(e),k.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,n=!(t&&t.silentJSONParsing)&&"json"===this.responseType;if(n||t&&t.forcedJSONParsing&&k.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw E(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};k.forEach(["delete","get","head"],function(e){O.headers[e]={}}),k.forEach(["post","put","patch"],function(e){O.headers[e]=k.merge(C)});var N=O,_=function(e,t,n){var r=this||N;return k.forEach(n,function(n){e=n.call(r,e,t)}),e},A=function(e){return!(!e||!e.__CANCEL__)};function M(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var F=function(e){return M(e),e.headers=e.headers||{},e.data=_.call(e,e.data,e.headers,e.transformRequest),e.headers=k.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),k.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||N.adapter)(e).then(function(t){return M(e),t.data=_.call(e,t.data,t.headers,e.transformResponse),t},function(t){return A(t)||(M(e),t&&t.response&&(t.response.data=_.call(e,t.response.data,t.response.headers,e.transformResponse))),o.reject(t)})},B=function(e,t){t=t||{};var n={},r=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],i=["validateStatus"];function s(e,t){return k.isPlainObject(e)&&k.isPlainObject(t)?k.merge(e,t):k.isPlainObject(t)?k.merge({},t):k.isArray(t)?t.slice():t}function c(r){k.isUndefined(t[r])?k.isUndefined(e[r])||(n[r]=s(void 0,e[r])):n[r]=s(e[r],t[r])}k.forEach(r,function(e){k.isUndefined(t[e])||(n[e]=s(void 0,t[e]))}),k.forEach(o,c),k.forEach(a,function(r){k.isUndefined(t[r])?k.isUndefined(e[r])||(n[r]=s(void 0,e[r])):n[r]=s(void 0,t[r])}),k.forEach(i,function(r){r in t?n[r]=s(e[r],t[r]):r in e&&(n[r]=s(void 0,e[r]))});var u=r.concat(o).concat(a).concat(i),d=Object.keys(e).concat(Object.keys(t)).filter(function(e){return-1===u.indexOf(e)});return k.forEach(d,c),n},L={name:"axios",version:"0.21.4",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]},D={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){D[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var z={},J=L.version.split(".");function H(e,t){for(var n=t?t.split("."):J,r=e.split("."),o=0;o<3;o++){if(n[o]>r[o])return!0;if(n[o]<r[o])return!1}return!1}D.transitional=function(e,t,n){var r=t&&H(t);function o(e,t){return"[Axios v"+L.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,a,i){if(!1===e)throw new Error(o(a," has been removed in "+t));return r&&!z[a]&&(z[a]=!0,console.warn(o(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,a,i)}};var W={isOlderVersion:H,assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),o=r.length;o-- >0;){var a=r[o],i=t[a];if(i){var s=e[a],c=void 0===s||i(s,a,e);if(!0!==c)throw new TypeError("option "+a+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+a)}},validators:D},V=W.validators;function K(e){this.defaults=e,this.interceptors={request:new T,response:new T}}K.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=B(this.defaults,e)).method=e.method?e.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var t=e.transitional;void 0!==t&&W.assertOptions(t,{silentJSONParsing:V.transitional(V.boolean,"1.0.0"),forcedJSONParsing:V.transitional(V.boolean,"1.0.0"),clarifyTimeoutError:V.transitional(V.boolean,"1.0.0")},!1);var n=[],r=!0;this.interceptors.request.forEach(function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))});var a,i=[];if(this.interceptors.response.forEach(function(e){i.push(e.fulfilled,e.rejected)}),!r){var s=[F,void 0];for(Array.prototype.unshift.apply(s,n),s=s.concat(i),a=o.resolve(e);s.length;)a=a.then(s.shift(),s.shift());return a}for(var c=e;n.length;){var u=n.shift(),d=n.shift();try{c=u(c)}catch(e){d(e);break}}try{a=F(c)}catch(e){return o.reject(e)}for(;i.length;)a=a.then(i.shift(),i.shift());return a},K.prototype.getUri=function(e){return e=B(this.defaults,e),R(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},k.forEach(["delete","get","head","options"],function(e){K.prototype[e]=function(t,n){return this.request(B(n||{},{method:e,url:t,data:(n||{}).data}))}}),k.forEach(["post","put","patch"],function(e){K.prototype[e]=function(t,n,r){return this.request(B(r||{},{method:e,url:t,data:n}))}});var X=K;function $(e){this.message=e}$.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},$.prototype.__CANCEL__=!0;var G=$;function Z(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new o(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new G(e),t(n.reason))})}Z.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Z.source=function(){var e;return{token:new Z(function(t){e=t}),cancel:e}};var Q=Z;function Y(e){var t=new X(e),n=l(X.prototype.request,t);return k.extend(n,X.prototype,t),k.extend(n,t),n}var ee=Y(N);ee.Axios=X,ee.create=function(e){return Y(B(ee.defaults,e))},ee.Cancel=G,ee.CancelToken=Q,ee.isCancel=A,ee.all=function(e){return o.all(e)},ee.spread=function(e){return function(t){return e.apply(null,t)}},ee.isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError};var te=ee;te.default=ee;var ne=te,re={user:{},tokens:{},mode:"live"},oe=function(e){var t={exports:{}};return function(e,t){var n;n=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function a(t,n,a){if("undefined"!=typeof document){"number"==typeof(a=e({path:"/"},o.defaults,a)).expires&&(a.expires=new Date(1*new Date+864e5*a.expires)),a.expires=a.expires?a.expires.toUTCString():"";try{var i=JSON.stringify(n);/^[\{\[]/.test(i)&&(n=i)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in a)a[c]&&(s+="; "+c,!0!==a[c]&&(s+="="+a[c].split(";")[0]));return document.cookie=t+"="+n+s}}function i(e,n){if("undefined"!=typeof document){for(var o={},a=document.cookie?document.cookie.split("; "):[],i=0;i<a.length;i++){var s=a[i].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(s[0]);if(c=(r.read||r)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(o[u]=c,e===u)break}catch(e){}}return e?o[e]:o}}return o.set=a,o.get=function(e){return i(e,!1)},o.getJSON=function(e){return i(e,!0)},o.remove=function(t,n){a(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}(function(){})},e.exports=n()}(t),t.exports}();function ae(e){try{var t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(window.atob(t).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(n)}catch(e){console.error("Problem decoding JWT payload",e)}}function ie(e){try{if(!e)return!1;var t=ae(e);return new Date(1e3*t.exp)>new Date}catch(e){return!1}}function se(e){var t,n;if(e){if("string"==typeof e)throw new Error(e);if(null!=e&&null!=(t=e.response)&&null!=(n=t.data)&&n.message)throw new Error(e.response.data.message);throw e}}function ce(){return"undefined"!=typeof window}var ue=re.user;function de(e){return e.replace(/([^:]\/)\/+/g,"$1")}var le=function(e,t,n){try{var r=de(""+re.baseUrl+e);return o.resolve(ne.put(r,t,n))}catch(e){return o.reject(e)}},fe=function(e,t,n){try{var r=de(""+re.baseUrl+e);return o.resolve(ne.post(r,t,n))}catch(e){return o.reject(e)}},he=function(e,t){try{var n=de(""+re.baseUrl+e);return o.resolve(ne.get(n,t))}catch(e){return o.reject(e)}};function pe(e,t,n){var r=n+"."+re.tenantId;t=t||{secure:"live"===re.mode,sameSite:"Lax"},"refresh"===n&&(t.sameSite="Strict"),oe.set(r,e,t)}function me(e){var t,n;try{var r=window.location.pathname,o=window.location.hostname,a=o.split(".").slice(-2).join(".");t=[void 0,r,"/"],n=[void 0,o,"."+o,a,"."+a]}catch(e){t=[void 0,"/"],n=[void 0]}t.map(function(t){n.map(function(n){var r={};n&&(r.domain=n),t&&(r.path=t),oe.remove(e,r)})})}function ve(){me(re.tokens.accessTokenName),me(re.tokens.idTokenName),me(re.tokens.refreshTokenName),re.tokens.accessToken=void 0,re.tokens.idToken=void 0,re.tokens.refreshToken=void 0,function(){for(var e in re.user)"function"!=typeof re.user[e]&&delete re.user[e]}()}function we(){return!!Ce.firstFactorToken}function ge(){return Ce.firstFactorToken?{authorization:"Bearer "+Ce.firstFactorToken}:{}}function ke(){Ce.secondFactors=[],Ce.firstFactorToken=null}var ye=function(){try{return o.resolve(Re()).then(function(e){return{isLoggedIn:e,needsSecondFactor:we(),firstFactors:Ce.firstFactors,secondFactors:Ce.secondFactors,resetMfaState:ke}})}catch(e){return o.reject(e)}},Re=function(){return o.resolve(function(e,t){try{var n=!!Ae()||!!ie(re.tokens.refreshToken)&&o.resolve(Oe()).then(function(){return Ae()})}catch(e){return!1}return n&&n.then?n.then(void 0,function(){return!1}):n}())},be={codeChallenge:"",get usePkce(){return!!be.codeChallenge}};function Te(){ce()&&(window.localStorage.removeItem("uf_pkce_code_challenge"),window.localStorage.removeItem("uf_pkce_code_challenge_expiresAt"))}function je(){if(ce()){var e=Ue("code_challenge");if(e)return be.codeChallenge=e,function(e){if(ce()){if(!e)return Te();be.codeChallenge=e;var t=Date.now()+3e5;try{window.localStorage.setItem("uf_pkce_code_challenge",e),window.localStorage.setItem("uf_pkce_code_challenge_expiresAt",t)}catch(e){}}}(e),!0;var t=function(){if(ce()){var e=window.localStorage.getItem("uf_pkce_code_challenge");if(e){var t=window.localStorage.getItem("uf_pkce_code_challenge_expiresAt");if(t&&parseInt(t,10)>Date.now())return e}}}();return t?(be.codeChallenge=t,!0):(Te(),!1)}}function Ee(){return be.usePkce?{code_challenge:be.codeChallenge}:{}}function Ue(e){if("object"==typeof window&&"object"==typeof window.location&&window.location.href&&!(window.location.href.indexOf(e+"=")<0))return decodeURIComponent(window.location.href.split(e+"=")[1].split("&")[0])}var Pe=function(e,t){!1!==e&&xe(!0!==e?e||Ue("redirect")||t.redirectTo||"/":Ue("redirect")||t.redirectTo||"/")};function xe(e){if(e&&"object"==typeof document&&"object"==typeof window){try{document&&window}catch(e){return}var t=document.createElement("a");t.href=e,t.pathname!==window.location.pathname&&window.location.assign(""+t.pathname+t.hash+t.search)}}var Ie=function(e){var t=e.data,n=e.redirect,r=e.handleUpstreamResponse,a=e.handleMfaRequired,i=e.handlePkceRequired,s=e.handleTokens,c=e.handleRedirect;try{function u(){var e;function r(r){if(e)return r;function a(){var e;function r(r){if(e)return r;var a=function(){if(t.hasOwnProperty("redirectTo")&&!1!==n){var e=function(){if("function"==typeof c)return o.resolve(c(d,t)).then(function(){});Pe(d,t)}();if(e&&e.then)return e.then(function(){})}}();return a&&a.then?a.then(function(){return t}):t}var a=function(){if(t.hasOwnProperty("authorizationCode")){if(!d)throw new Error("Missing PKCE redirect url");return"function"==typeof i?o.resolve(i(t.authorizationCode,d,t)).then(function(){}):(function(e,t,n){if(t&&e){be.usePkce||console.warn("Redirecting with a PKCE authorization code, but no PKCE challenge code is present in the client. This is unexpected.");var r=new URL(t);r.searchParams.set("authorization_code",e),Te(),window.location.assign(r.href)}}(t.authorizationCode,d),e=1,t)}}();return a&&a.then?a.then(r):r(a)}var u=function(){if(t.hasOwnProperty("tokens")){var e="function"==typeof s?o.resolve(s(t.tokens,t)).then(function(){}):o.resolve(Ne(t.tokens,t)).then(function(){});if(e&&e.then)return e.then(function(){})}}();return u&&u.then?u.then(a):a()}var u=function(){if(t.hasOwnProperty("firstFactorToken")){function n(){return e=1,t}var r=function(){if("function"==typeof a)return o.resolve(a(t.firstFactorToken,t)).then(function(){});!function(e,t){t.isMfaRequired?(Ce.firstFactorToken=e,Ce.secondFactors=t.authentication.secondFactors):"OK"===t.message&&ke()}(t.firstFactorToken,t)}();return r&&r.then?r.then(n):n()}}();return u&&u.then?u.then(r):r(u)}var d=n||Ue("redirect")||t.redirectTo||"/",l=function(){if("function"==typeof r)return o.resolve(r(t.upstreamResponse,t)).then(function(){})}();return o.resolve(l&&l.then?l.then(u):u())}catch(f){return o.reject(f)}},Ce={firstFactors:[],secondFactors:[],firstFactorToken:null};function Se(e){pe(e.access.value,e.access.cookieOptions,"access"),pe(e.id.value,e.id.cookieOptions,"id"),e.refresh&&e.refresh.value&&pe(e.refresh.value,e.refresh.cookieOptions,"refresh"),_e()}function qe(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}var Oe=function(){try{var e=qe(function(){return o.resolve(function(){try{var e=oe.get(re.tokens.refreshTokenName);return o.resolve(qe(function(){return o.resolve(he("/auth/refresh",{headers:{authorization:"Bearer "+e}})).then(function(e){var t=e.data;if(200!==e.status)throw new Error(t.message||"Problem with request");if(t.tokens)return Se(t.tokens),t;throw new Error("Problem setting cookies")})},function(e){se(e)}))}catch(e){return o.reject(e)}}()).then(function(){})},function(e){console.warn("Refresh failed: "+e.message)});return o.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return o.reject(e)}},Ne=function(e,t){try{return Se(e),o.resolve(o.resolve()).then(function(){})}catch(e){return o.reject(e)}};function _e(){["access","id","refresh"].map(function(e){try{var t=oe.get(re.tokens[e+"TokenName"]);re.tokens[e+"Token"]=t,"id"===e&&t&&function(){if(!re.tokens.idToken)return console.warn("Cannot define user: missing ID token");re.user=re.user||{};for(var e=ae(re.tokens.idToken),t=0,n=["email","phoneNumber","username","name","image","data","createdAt","updatedAt","mode","userId","userUuid","tenantId","isEmailConfirmed","isPhoneNumberConfirmed","confirmedEmailAt","confirmedPhoneNumberAt","isMfaRequired","isConfirmed"];t<n.length;t++){var r=n[t];if("update"===r)return;re.user[r]=e[r]}}()}catch(t){console.warn("Problem setting "+e+" token.")}})}function Ae(){return ie(re.tokens.accessToken)}re.tokens=re.tokens||{},re.tokens.refresh=Oe;var Me=re.tokens;function Fe(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}var Be=function(e){var t=e.password,n=e.existingPassword;try{return o.resolve(Fe(function(){if(!re.tokens.accessToken)throw new Error('updatePassword({ method: "jwt" }) was called without a JWT access token.');return o.resolve(le("/auth/basic",{tenantId:re.tenantId,password:t,existingPassword:n},{headers:{Authorization:"Bearer "+re.tokens.accessToken}})).then(function(e){return e.data})},function(e){se(e)}))}catch(e){return o.reject(e)}},Le=function(e){var t=e.uuid,n=e.token,r=e.password,a=e.redirect,i=e.handleUpstreamResponse,s=e.handleMfaRequired,c=e.handlePkceRequired,u=e.handleTokens,d=e.handleRedirect;try{return o.resolve(Fe(function(){if(n=n||Ue("token"),t=t||Ue("uuid"),!n||!t)throw new Error("Missing token or uuid");return o.resolve(le("/auth/reset",{tenantId:re.tenantId,uuid:t,token:n,password:r})).then(function(e){return Ie({data:e.data,redirect:a,handleUpstreamResponse:i,handleMfaRequired:s,handlePkceRequired:c,handleTokens:u,handleRedirect:d})})},function(e){se(e)}))}catch(e){return o.reject(e)}},De=function(e){var t=e.method,n=e.password,r=e.existingPassword,a=e.uuid,i=e.token,s=e.redirect,c=e.handleUpstreamResponse,u=e.handleMfaRequired,d=e.handlePkceRequired,l=e.handleTokens,f=e.handleRedirect;try{switch(t){case"link":return Le({uuid:a,token:i,password:n,redirect:s,handleUpstreamResponse:c,handleMfaRequired:u,handlePkceRequired:d,handleTokens:l,handleRedirect:f});case"jwt":return Be({password:n,existingPassword:r});default:if(i=i||Ue("token"),(a=a||Ue("uuid"))&&i)return Le({uuid:a,token:i,password:n,redirect:s,handleUpstreamResponse:c,handleMfaRequired:u,handlePkceRequired:d,handleTokens:l,handleRedirect:f});if(re.tokens.accessToken)return Be({password:n,existingPassword:r});throw new Error("updatePassword() was called without link credentials (token & uuid) or a JWT access token.")}}catch(e){return o.reject(e)}},ze=De;function Je(e){var t=e.provider,n=e.redirect,r=e.providerId;if(!t)throw new Error("Missing provider");var o=function(e){var t=e.provider,n=e.redirect,r=e.providerId;if(!t)throw new Error("Missing provider");if(!re.tenantId)throw new Error("Missing tenantId");if("custom"===t&&!r)throw new Error("Missing providerId");var o=new URL(re.baseUrl+"auth/"+t+"/login");o.searchParams.append("origin",window.location.origin),o.searchParams.append("tenant_id",re.tenantId),"custom"===t&&o.searchParams.append("provider_id",r);var a=n||Ue("redirect");return!1===n&&(a="object"==typeof document&&document.location.pathname),a&&o.searchParams.append("redirect",a),o.toString()}({provider:t,redirect:n,providerId:r});window.location.assign(o)}function He(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}var We=function(e){var t=e.email,n=e.name,r=e.username,a=e.userData,i=e.options;try{return o.resolve(He(function(){return o.resolve(fe("/auth/link",{email:t,name:n,username:r,data:a,options:i,tenantId:re.tenantId})).then(function(e){return e.data})},function(e){se(e)}))}catch(e){return o.reject(e)}};function Ve(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function Ke(e){var t=e.channel,n=e.phoneNumber,r=e.email;if("sms"!==t&&"email"!==t)throw new Error("Invalid channel");if(!we()){if("sms"===t&&!n)throw new Error('SMS verification code requires "phoneNumber"');if("email"===t&&!r)throw new Error('Email verification code requires "email"')}}var Xe=function(e){var t=e.channel,n=void 0===t?"sms":t,r=e.phoneNumber,a=e.email,i=e.name,s=e.username,c=e.data;try{return o.resolve(Ve(function(){return Ke({channel:n,phoneNumber:r,email:a}),o.resolve(fe("/auth/code",{channel:n,email:a,phoneNumber:r,name:i,username:s,data:c,tenantId:re.tenantId},{headers:ge()})).then(function(e){return e.data})},function(e){se(e)}))}catch(e){return o.reject(e)}};function $e(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}function Ge(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}var Ze=/((^127\.)|(^10\.)|(^172\.1[6-9]\.)|(^172\.2[0-9]\.)|(^172\.3[0-1]\.)|(^192\.168\.))\d{1,3}\.\d{1,3}/g,Qe=function(){try{return o.resolve(function(e,t){try{var n=o.resolve(he("/tenants/"+re.tenantId+"/mode")).then(function(e){var t,n=e.data;return Ye.value=n.mode||"test",Ye.reason=tt(Ye.value),re.mode=Ye.value,t=n.authentication,re.tenantId?t&&"object"==typeof t&&Array.isArray(t.firstFactors)?Ce.firstFactors=t.firstFactors:console.warn("setFirstFactors: invalid factors passed."):console.warn("setFirstFactors: tried to set factors without a tenantId set."),n})}catch(e){return t()}return n&&n.then?n.then(void 0,t):n}(0,function(){Ye.value="test",re.mode=Ye.value}))}catch(e){return o.reject(e)}},Ye={value:"live",reason:void 0,setMode:Qe};function et(){var e=function(e){try{var t=window.location.hostname;return!(!t.match(/localhost/g)&&!t.match(Ze))}catch(e){return!0}}()||!function(){try{return"https:"===window.location.protocol}catch(e){return!1}}()?"test":"live";Ye.value=e,Ye.reason=tt(e),re.mode=e}function tt(e){try{return"live"===e?"domain":"http:"===window.location.protocol?"http":"https:"!==window.location.protocol?"protocol":"domain"}catch(e){}}et(),re.user.update=function(e){try{return!e||Object.keys(e).length<1?o.resolve(console.warn("Missing user properties to update")):o.resolve(le("/self",e,{headers:{authorization:"Bearer "+re.tokens.accessToken}})).then(function(){return o.resolve(Oe()).then(function(){return re.user})})}catch(e){return o.reject(e)}},re.user.hasRole=function(e,t){var n=(void 0===t?{}:t).tenantId;try{if(!re.tokens.accessToken||!re.tenantId)return!1;var r=ae(re.tokens.accessToken).authorization;return!!r&&!(!r[n=n||re.tenantId]||!r[n].roles)&&r[n].roles.indexOf(e)>-1}catch(e){return!1}},re.user.updatePassword=De,re.user.getTotp=function(){try{var e;return o.resolve($e(function(){function t(t){if(e)return t;if(!re.tokens.accessToken)throw new Error("getTotp() was called without a JWT access token.");return o.resolve(he("/auth/totp",{headers:{Authorization:"Bearer "+re.tokens.accessToken}})).then(function(e){return e.data})}var n=function(){if(we())return o.resolve(he("/auth/totp",{headers:ge()})).then(function(t){return e=1,t.data})}();return n&&n.then?n.then(t):t(n)},function(e){se(e)}))}catch(e){return o.reject(e)}};var nt=[],rt=!1,ot={addInitCallback:function(e){e&&"function"==typeof e&&nt.push(e)},init:function(e,t){if(void 0===t&&(t={}),!e)return console.warn("Userfront initialized without tenantId");if(re.tenantId=e,re.baseUrl=t.baseUrl||"https://api.userfront.com/v0/",re.baseUrl.endsWith("/")||(re.baseUrl+="/"),t.domain){re.domain=t.domain;var n="https://"+re.domain;ne.defaults.headers.common["x-application-id"]=n,ne.defaults.headers.common["x-origin"]=n}re.tokens=re.tokens||{},re.tokens.accessTokenName="access."+re.tenantId,re.tokens.idTokenName="id."+re.tenantId,re.tokens.refreshTokenName="refresh."+re.tenantId,_e(),et(),ke(),Ce.firstFactors=[];try{nt.length>0&&nt.forEach(function(t){t&&"function"==typeof t&&t({tenantId:e})}),nt=[]}catch(e){}},registerUrlChangedEventListener:function(){if(!rt){rt=!0;try{history.pushState=(e=history.pushState,function(){var t=e.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("urlchanged")),t}),history.replaceState=function(e){return function(){var t=e.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("urlchanged")),t}}(history.replaceState),window.addEventListener("popstate",function(){window.dispatchEvent(new Event("urlchanged"))})}catch(e){}var e}},logout:function(e){var t=void 0===e?{}:e,n=t.method,r=t.redirect;try{if("saml"===n)return function(){try{if(!re.tokens.accessToken)throw new Error("Please log in to authorize your logout request.");var e=Ge(function(){return o.resolve(he("/auth/saml/idp/token",{headers:{authorization:"Bearer "+re.tokens.accessToken}})).then(function(e){window.location.assign(re.baseUrl+"auth/saml/idp/logout?tenant_id="+re.tenantId+"&token="+e.data.token+"&uuid="+re.user.userUuid)})},function(e){se(e)});return o.resolve(e&&e.then?e.then(function(){}):void 0)}catch(e){return o.reject(e)}}();if(!re.tokens.accessToken)return o.resolve(ve());var a=Ge(function(){return o.resolve(he("/auth/logout",{headers:{authorization:"Bearer "+re.tokens.accessToken}})).then(function(e){var t=e.data;ve(),Pe(r,t)})},function(){ve()});return o.resolve(a&&a.then?a.then(function(){}):void 0)}catch(e){return o.reject(e)}},mode:Ye,setMode:Qe,refresh:function(e,t,n){try{console.warn("Userfront.refresh() is deprecated and will be removed. Please use Userfront.tokens.refresh() instead.")}catch(e){}return Oe()},login:function(e){var t=void 0===e?{}:e,n=t.method,r=t.userId,a=t.userUuid,i=t.email,s=t.username,c=t.emailOrUsername,u=t.phoneNumber,d=t.password,l=t.token,f=t.uuid,h=t.totpCode,p=t.backupCode,m=t.channel,v=t.verificationCode,w=t.providerId,g=t.redirect,k=t.handleUpstreamResponse,y=t.handleMfaRequired,R=t.handlePkceRequired,b=t.handleTokens,T=t.handleRedirect,j=t.options;try{if(!n)throw new Error('Userfront.login called without "method" property.');switch(je(),n){case"apple":case"azure":case"facebook":case"github":case"google":case"linkedin":case"okta":return o.resolve(Je({provider:n,redirect:g}));case"custom":return o.resolve(Je({provider:n,redirect:g,providerId:w}));case"password":return o.resolve(function(e){var t=e.email,n=e.username,r=e.emailOrUsername,a=e.password,i=e.redirect,s=e.handleUpstreamResponse,c=e.handleMfaRequired,u=e.handlePkceRequired,d=e.handleTokens,l=e.handleRedirect,f=e.options;try{return o.resolve(Fe(function(){var e={tenantId:re.tenantId,emailOrUsername:t||n||r,password:a};return f&&f.noResetEmail&&(e.options={noResetEmail:!0}),o.resolve(fe("/auth/basic",e,{headers:ge(),params:Ee()})).then(function(e){return Ie({data:e.data,redirect:i,handleUpstreamResponse:s,handleMfaRequired:c,handlePkceRequired:u,handleTokens:d,handleRedirect:l})})},function(e){se(e)}))}catch(e){return o.reject(e)}}({email:i,username:s,emailOrUsername:c,password:d,redirect:g,handleUpstreamResponse:k,handleMfaRequired:y,handlePkceRequired:R,handleTokens:b,handleRedirect:T,options:j}));case"password-migrate":return o.resolve(function(e){var t=e.email,n=e.username,r=e.emailOrUsername,a=e.password,i=e.redirect,s=e.handleUpstreamResponse,c=e.handleMfaRequired,u=e.handlePkceRequired,d=e.handleTokens,l=e.handleRedirect,f=e.options;try{return o.resolve(function(e,h){try{var p=function(){var e={tenantId:re.tenantId,emailOrUsername:t||n||r,password:a};return f&&f.noResetEmail&&(e.options={noResetEmail:!0}),o.resolve(fe("/auth/password/migrate",e,{headers:ge(),params:Ee()})).then(function(e){return Ie({data:e.data,redirect:i,handleUpstreamResponse:s,handleMfaRequired:c,handlePkceRequired:u,handleTokens:d,handleRedirect:l})})}()}catch(e){return h(e)}return p&&p.then?p.then(void 0,h):p}(0,function(e){se(e)}))}catch(e){return o.reject(e)}}({email:i,username:s,emailOrUsername:c,password:d,redirect:g,handleUpstreamResponse:k,handleMfaRequired:y,handlePkceRequired:R,handleTokens:b,handleRedirect:T,options:j}));case"passwordless":return o.resolve(We({email:i}));case"link":return o.resolve(function(e){var t=void 0===e?{}:e,n=t.token,r=t.uuid,a=t.redirect,i=t.handleUpstreamResponse,s=t.handleMfaRequired,c=t.handlePkceRequired,u=t.handleTokens,d=t.handleRedirect;try{return o.resolve(He(function(){if(n=n||Ue("token"),r=r||Ue("uuid"),n&&r)return o.resolve(le("/auth/link",{token:n,uuid:r,tenantId:re.tenantId},{headers:ge(),params:Ee()})).then(function(e){return Ie({data:e.data,redirect:a,handleUpstreamResponse:i,handleMfaRequired:s,handlePkceRequired:c,handleTokens:u,handleRedirect:d})})},function(e){se(e)}))}catch(e){return o.reject(e)}}({token:l,uuid:f,redirect:g,handleUpstreamResponse:k,handleMfaRequired:y,handlePkceRequired:R,handleTokens:b,handleRedirect:T}));case"totp":return o.resolve(function(e){var t=void 0===e?{}:e,n=t.totpCode,r=t.backupCode,a=t.userId,i=t.userUuid,s=t.emailOrUsername,c=t.email,u=t.username,d=t.phoneNumber,l=t.redirect,f=t.handleUpstreamResponse,h=t.handleMfaRequired,p=t.handlePkceRequired,m=t.handleTokens,v=t.handleRedirect;try{return o.resolve($e(function(){return o.resolve(fe("/auth/totp",{totpCode:n,backupCode:r,userId:a,userUuid:i,emailOrUsername:s,email:c,username:u,phoneNumber:d,tenantId:re.tenantId},{headers:ge(),params:Ee()})).then(function(e){return Ie({data:e.data,redirect:l,handleUpstreamResponse:f,handleMfaRequired:h,handlePkceRequired:p,handleTokens:m,handleRedirect:v})})},function(e){se(e)}))}catch(e){return o.reject(e)}}({totpCode:h,backupCode:p,userId:r,userUuid:a,emailOrUsername:c,email:i,username:s,phoneNumber:u,redirect:g,handleUpstreamResponse:k,handleMfaRequired:y,handlePkceRequired:R,handleTokens:b,handleRedirect:T}));case"verificationCode":return o.resolve(function(e){var t=void 0===e?{}:e,n=t.channel,r=t.verificationCode,a=t.email,i=t.phoneNumber,s=t.redirect,c=t.handleUpstreamResponse,u=t.handleMfaRequired,d=t.handlePkceRequired,l=t.handleTokens,f=t.handleRedirect;try{return o.resolve(Ve(function(){return Ke({channel:n,phoneNumber:i,email:a}),o.resolve(le("/auth/code",{channel:n,verificationCode:r,email:a,phoneNumber:i,tenantId:re.tenantId},{headers:ge(),params:Ee()})).then(function(e){return Ie({data:e.data,redirect:s,handleUpstreamResponse:c,handleMfaRequired:u,handlePkceRequired:d,handleTokens:l,handleRedirect:f})})},function(e){se(e)}))}catch(e){return o.reject(e)}}({channel:m,email:i,phoneNumber:u,verificationCode:v,redirect:g,handleUpstreamResponse:k,handleMfaRequired:y,handlePkceRequired:R,handleTokens:b,handleRedirect:T}));case"saml":return o.resolve(function(){try{return o.resolve(function(e,t){try{var n=re.tokens.accessToken?o.resolve(he("/auth/saml/idp/token",{headers:{authorization:"Bearer "+re.tokens.accessToken}})).then(function(e){window.location.assign(re.baseUrl+"auth/saml/idp/login?tenant_id="+re.tenantId+"&token="+e.data.token+"&uuid="+re.user.userUuid)}):console.warn("Cannot complete SAML login without access token")}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(0,function(e){se(e)}))}catch(e){return o.reject(e)}}());default:throw new Error('Userfront.login called with invalid "method" property.')}}catch(e){return o.reject(e)}},resetPassword:ze,updatePassword:De,sendLoginLink:function(e){try{return o.resolve(He(function(){return o.resolve(fe("/auth/link",{email:e,tenantId:re.tenantId})).then(function(e){return e.data})},function(e){se(e)}))}catch(e){return o.reject(e)}},sendResetLink:function(e){try{return o.resolve(Fe(function(){return o.resolve(fe("/auth/reset/link",{email:e,tenantId:re.tenantId})).then(function(e){return e.data})},function(e){se(e)}))}catch(e){return o.reject(e)}},sendVerificationCode:Xe,signup:function(e){var t=void 0===e?{}:e,n=t.method,r=t.email,a=t.username,i=t.phoneNumber,s=t.name,c=t.data,u=t.password,d=t.channel,l=t.providerId,f=t.redirect,h=t.handleUpstreamResponse,p=t.handleMfaRequired,m=t.handlePkceRequired,v=t.handleTokens,w=t.handleRedirect;try{if(je(),!n)throw new Error('Userfront.signup called without "method" property.');switch(n){case"apple":case"azure":case"facebook":case"github":case"google":case"linkedin":case"okta":return o.resolve(Je({provider:n,redirect:f}));case"custom":return o.resolve(Je({provider:n,redirect:f,providerId:l}));case"password":return o.resolve(function(e){var t=void 0===e?{}:e,n=t.username,r=t.name,a=t.email,i=t.password,s=t.userData,c=t.redirect,u=t.handleUpstreamResponse,d=t.handleMfaRequired,l=t.handlePkceRequired,f=t.handleTokens,h=t.handleRedirect;try{return o.resolve(Fe(function(){return o.resolve(fe("/auth/create",{tenantId:re.tenantId,username:n,name:r,email:a,password:i,data:s},{headers:ge(),params:Ee()})).then(function(e){return Ie({data:e.data,redirect:c,handleUpstreamResponse:u,handleMfaRequired:d,handlePkceRequired:l,handleTokens:f,handleRedirect:h})})},function(e){se(e)}))}catch(e){return o.reject(e)}}({username:a,name:s,email:r,password:u,userData:c,redirect:f,handleUpstreamResponse:h,handleMfaRequired:p,handlePkceRequired:m,handleTokens:v,handleRedirect:w}));case"passwordless":return o.resolve(We({email:r,name:s,username:a,userData:c}));case"verificationCode":return o.resolve(Xe({channel:d,email:r,phoneNumber:i,name:s,username:a,data:c}));default:throw new Error('Userfront.signup called with invalid "method" property.')}}catch(e){return o.reject(e)}},store:re,tokens:Me,accessToken:function(){return re.tokens.accessToken=oe.get(re.tokens.accessTokenName),re.tokens.accessToken},idToken:function(){return re.tokens.idToken=oe.get(re.tokens.idTokenName),re.tokens.idToken},getSession:ye,redirectIfLoggedIn:function(e){var t=(void 0===e?{}:e).redirect;try{return o.resolve(ye()).then(function(e){if(!e.isLoggedIn)return ve();if(!be.usePkce){if(t)return xe(t);if(Ue("redirect"))return xe(Ue("redirect"));var n=function(e,t){try{var n=o.resolve(he("/self",{headers:{authorization:"Bearer "+re.tokens.accessToken}})).then(function(e){var t=e.data;t.tenant&&t.tenant.loginRedirectPath&&xe(t.tenant.loginRedirectPath)})}catch(e){return t()}return n&&n.then?n.then(void 0,t):n}(0,function(){ve()});return n&&n.then?n.then(function(){}):void 0}})}catch(e){return o.reject(e)}},redirectIfLoggedOut:function(e){var t=(void 0===e?{}:e).redirect;try{return o.resolve(ye()).then(function(e){if(!e.isLoggedIn)return ve(),t?xe(t):Ue("redirect")?xe(Ue("redirect")):void 0})}catch(e){return o.reject(e)}},user:ue};return ot});
//# sourceMappingURL=userfront-core.ie11.umd.js.map
